<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playas de Fuerteventura - Las mejores playas de la isla</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="css/styles.css?v=2025110810">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="description" content="Descubre las mejores playas de Fuerteventura: Corralejo, Cofete, El Cotillo y mucho más. Guía completa de playas paradisíacas.">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.jpg" alt="This is Fuerteventura Logo" class="logo">
            <h1>This is Fuerteventura</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="noticias.html">Noticias</a></li>
                <li><a href="turismo.html">Turismo</a></li>
                <li><a href="alojamiento.html">Alojamiento</a></li>
                <li><a href="playas.html">Playas</a></li>
                <li><a href="gastronomia.html">Gastronomía</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </nav>
        <div class="mobile-menu">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <main id="main">
    <section class="hero beaches-hero">
        <div class="hero-content">
            <h2>Playas de Fuerteventura</h2>
            <p>Descubre el paraíso de arena y mar</p>
        </div>
    </section>

    <!-- Tiempo general de Fuerteventura -->
    <section class="island-weather" id="island-weather">
        <div class="container">
            <h2>Tiempo ahora en Fuerteventura</h2>
            <div class="island-weather-card" id="island-weather-card">
                <div class="loading">Cargando tiempo...</div>
            </div>
            <p class="disclaimer">Fuente: Open‑Meteo. Punto de referencia: Puerto del Rosario.</p>
        </div>
    </section>

    <section class="beaches-content">
        <div class="container">
            <h2>Las Mejores Playas de Fuerteventura</h2>
            <p class="intro-text">Descubre más de 150 playas con aguas cristalinas y arena dorada. Aquí te presentamos las imprescindibles.</p>

            <div class="beaches-grid">
                <article class="beach-card">
                    <img src="images/playas/corralejo.jpeg" alt="Grandes Playas de Corralejo" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Grandes Playas de Corralejo</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Corralejo, Norte de Fuerteventura</span>
                        </div>
                        <p>Extensión de más de 10km de arena blanca y fina junto al Parque Natural de las Dunas. Aguas turquesas poco profundas, perfectas para familias. Zona norte con viento ideal para windsurf y kitesurf.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-parking"></i> Aparcamiento</span>
                            <span><i class="fas fa-umbrella-beach"></i> Hamacas</span>
                            <span><i class="fas fa-wind"></i> Windsurf</span>
                            <span><i class="fas fa-utensils"></i> Chiringuitos</span>
                        </div>
                        <a href="https://maps.app.goo.gl/9QYVZCqKz8xYnRms7" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/cofete.jpeg" alt="Playa de Cofete" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de Cofete</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Península de Jandía, Pájara</span>
                        </div>
                        <p>12km de playa virgen considerada una de las más bellas de España. Paisaje salvaje con montañas de fondo y el misterioso Villa Winter. Acceso por pista de tierra (4x4 recomendado). Oleaje fuerte, precaución al bañarse.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-hiking"></i> Playa virgen</span>
                            <span><i class="fas fa-camera"></i> Paisajes únicos</span>
                            <span><i class="fas fa-exclamation-triangle"></i> Corrientes fuertes</span>
                            <span><i class="fas fa-car"></i> 4x4 recomendado</span>
                        </div>
                        <a href="https://maps.app.goo.gl/eQqH9BrZU5pxjvWc6" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/cotillo.jpeg" alt="Lagos de El Cotillo" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Lagos de El Cotillo</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>El Cotillo, La Oliva</span>
                        </div>
                        <p>Serie de calas protegidas con piscinas naturales de aguas cristalinas. Ideal para familias con niños pequeños. El Aljibe de la Cueva es perfecto para snorkel. Al sur, playa Los Lagos con olas para surf.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-child"></i> Familias</span>
                            <span><i class="fas fa-swimming-pool"></i> Piscinas naturales</span>
                            <span><i class="fas fa-fish"></i> Snorkel</span>
                            <span><i class="fas fa-parking"></i> Parking cercano</span>
                        </div>
                        <a href="https://maps.app.goo.gl/fQ3t7wkB9nMz8zGK8" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/sotavento.jpeg" alt="Playa de Sotavento" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de Sotavento</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Costa Calma - Jandía, Pájara</span>
                        </div>
                        <p>9km de playa paradisíaca con laguna que se forma con la marea baja. Sede del Campeonato Mundial de Windsurf y Kitesurf. Vientos alisios constantes y escuelas de deportes acuáticos. Zona de aguas tranquilas y zona de olas.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-wind"></i> Windsurf/Kitesurf</span>
                            <span><i class="fas fa-trophy"></i> Campeonatos</span>
                            <span><i class="fas fa-school"></i> Escuelas</span>
                            <span><i class="fas fa-umbrella-beach"></i> Servicios completos</span>
                        </div>
                        <a href="https://maps.app.goo.gl/xZXF4qYRPnN5Y7xU6" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/ajuy.jpeg" alt="Playa de Ajuy" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de Ajuy (Playa Negra)</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Ajuy, Pájara</span>
                        </div>
                        <p>Pequeña playa de arena negra volcánica con encanto especial. Famosa por sus cuevas marinas visitables a pie. Pueblo pesquero auténtico con excelentes restaurantes de pescado fresco. Oleaje moderado.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-mountain"></i> Arena volcánica</span>
                            <span><i class="fas fa-dungeon"></i> Cuevas marinas</span>
                            <span><i class="fas fa-fish"></i> Pueblo pesquero</span>
                            <span><i class="fas fa-utensils"></i> Restaurantes</span>
                        </div>
                        <a href="https://maps.app.goo.gl/vK8qMYz6Tp3JxRWJ9" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/morrojable.jpeg" alt="Playa de Morro Jable" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de Morro Jable</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Morro Jable, Pájara</span>
                        </div>
                        <p>Playa urbana de 4km con paseo marítimo, ideal para familias. Aguas tranquilas y servicios completos. Ambiente turístico con hoteles, restaurantes y tiendas. Puerto con excursiones en barco a playas cercanas.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-city"></i> Playa urbana</span>
                            <span><i class="fas fa-child"></i> Familias</span>
                            <span><i class="fas fa-umbrella-beach"></i> Todos los servicios</span>
                            <span><i class="fas fa-ship"></i> Excursiones</span>
                        </div>
                        <a href="https://maps.app.goo.gl/JkH3rM8vC6Sq7ePe8" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/laconcha.webp" alt="Playa de La Concha" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de La Concha</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>El Cotillo, La Oliva</span>
                        </div>
                        <p>Playa protegida en forma de concha con aguas muy tranquilas. Perfecta para niños y personas mayores. Arena blanca y fina. Suele estar concurrida en temporada alta por su belleza y tranquilidad.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-baby"></i> Ideal niños</span>
                            <span><i class="fas fa-water"></i> Aguas tranquilas</span>
                            <span><i class="fas fa-parking"></i> Parking</span>
                            <span><i class="fas fa-heart"></i> Muy popular</span>
                        </div>
                        <a href="https://maps.app.goo.gl/RnP7h5WxqsNfY2Yz8" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/esquinzo.jpeg" alt="Playa de Esquinzo" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa de Esquinzo (Butihondo)</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Esquinzo, Pájara</span>
                        </div>
                        <p>Playa tranquila entre acantilados con arena dorada. Menos masificada que otras playas del sur. Ideal para quienes buscan tranquilidad. Buen acceso y aparcamiento gratuito. Pequeños chiringuitos en temporada alta.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-people-carry"></i> Tranquila</span>
                            <span><i class="fas fa-mountain"></i> Entre acantilados</span>
                            <span><i class="fas fa-parking"></i> Parking gratuito</span>
                            <span><i class="fas fa-umbrella-beach"></i> Servicios básicos</span>
                        </div>
                        <a href="https://maps.app.goo.gl/mJNb8pKvY3Q4rFrTA" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>

                <article class="beach-card">
                    <img src="images/playas/matorral.jpg" alt="Playa del Matorral" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
                    <div class="beach-info">
                        <h3>Playa del Matorral</h3>
                        <div class="beach-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Morro Jable, Pájara</span>
                        </div>
                        <p>Continuación natural de la playa de Morro Jable, menos urbanizada. Paseo litoral de 2km hasta el faro. Popular entre runners y caminantes. Observación de aves marinas. Arena clara y aguas limpias.</p>
                        <div class="beach-features">
                            <span><i class="fas fa-running"></i> Paseos</span>
                            <span><i class="fas fa-crow"></i> Aves marinas</span>
                            <span><i class="fas fa-lighthouse"></i> Faro cercano</span>
                            <span><i class="fas fa-umbrella-beach"></i> Menos concurrida</span>
                        </div>
                        <a href="https://maps.app.goo.gl/uN6K9YqPxM5cVLdJ7" target="_blank" rel="noopener" class="btn btn-small">
                            <i class="fas fa-map-marked-alt"></i> Ver en Google Maps
                        </a>
                    </div>
                </article>
            </div>

            <!-- Condiciones actuales: tiempo y mar (después de las tarjetas) -->
            <section class="beach-conditions" id="beach-conditions">
                <h2>Tiempo y condiciones del mar</h2>
                <div class="conditions-controls">
                    <label for="beach-select">Selecciona una playa:</label>
                    <select id="beach-select">
                        <option value="28.7319,-13.8697">Corralejo</option>
                        <option value="28.0515,-14.5120">Cofete</option>
                        <option value="28.6937,-14.0120">El Cotillo</option>
                        <option value="28.1631,-14.2272">Sotavento</option>
                        <option value="28.4020,-14.1605">Ajuy</option>
                        <option value="28.0526,-14.3501">Morro Jable</option>
                    </select>
                    <div class="horizon-toggle" role="group" aria-label="Horizonte de olas">
                        <button type="button" class="toggle active" data-h="6">6h</button>
                        <button type="button" class="toggle" data-h="12">12h</button>
                    </div>
                </div>
                <div class="conditions-grid">
                    <div class="conditions-card" id="weather-card">
                        <h3><i class="fas fa-sun"></i> Tiempo</h3>
                        <div class="loading">Cargando tiempo...</div>
                    </div>
                    <div class="conditions-card" id="marine-card">
                        <h3><i class="fas fa-water"></i> Mar</h3>
                        <div class="loading">Cargando condiciones del mar...</div>
                    </div>
                </div>
                <p class="disclaimer">Datos aproximados (Open-Meteo). Mareas (mock) servidas por el proxy local.</p>
            </section>
        </div>
    </section>

    <section class="beach-profiles">
        <h2>Playas por perfil de viajero</h2>
        <div class="profiles-grid">
            <div class="profile">
                <h3>Familias</h3>
                <p>Lagunas de El Cotillo y zonas resguardadas de Corralejo ofrecen aguas tranquilas y poco profundas.</p>
            </div>
            <div class="profile">
                <h3>Surfistas</h3>
                <p>El norte de la isla suele tener mejores olas. Infórmate de las condiciones y respeta a los locales.</p>
            </div>
            <div class="profile">
                <h3>Fotografía</h3>
                <p>Cofete al atardecer y Sotavento con marea baja son localizaciones espectaculares.</p>
            </div>
        </div>
    </section>

    <section class="image-gallery">
        <h2>Galería de playas</h2>
        <div class="gallery-grid">
            <img src="https://images.unsplash.com/photo-1473116763249-2faaef81ccda?auto=format&fit=crop&w=1200&q=80" alt="Costa y dunas" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
            <img src="https://images.unsplash.com/photo-1493550498615-8766b66f7921?auto=format&fit=crop&w=1200&q=80" alt="Arena dorada" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
            <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&q=80" alt="Litoral atlántico" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
            <img src="https://images.unsplash.com/photo-1502849394214-c4b63521420d?auto=format&fit=crop&w=1200&q=80" alt="Playa salvaje" onerror="this.onerror=null;this.src='images/Fuerteventura.jpeg';">
        </div>
    </section>

    <section class="beach-tips">
        <h2>Consejos para tu visita a la playa</h2>
        <div class="tips-container">
            <div class="tip">
                <i class="fas fa-sun"></i>
                <h3>Protección solar</h3>
                <p>Usa protector solar de alto factor y renuévalo cada 2 horas.</p>
            </div>
            <div class="tip">
                <i class="fas fa-flag"></i>
                <h3>Banderas</h3>
                <p>Respeta las señalizaciones y banderas de seguridad.</p>
            </div>
            <div class="tip">
                <i class="fas fa-wind"></i>
                <h3>Viento</h3>
                <p>Ten en cuenta la dirección del viento y las corrientes.</p>
            </div>
            <div class="tip">
                <i class="fas fa-trash-alt"></i>
                <h3>Limpieza</h3>
                <p>Mantén la playa limpia y llévate tu basura.</p>
            </div>
        </div>
    </section>

    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="images/logo.jpg" alt="This is Fuerteventura Logo" class="logo">
                <h3>This is Fuerteventura</h3>
            </div>
            <div class="footer-links">
                <h4>Enlaces rápidos</h4>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="noticias.html">Noticias</a></li>
                    <li><a href="turismo.html">Turismo</a></li>
                    <li><a href="alojamiento.html">Alojamiento</a></li>
                    <li><a href="playas.html">Playas</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h4>Síguenos</h4>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-contact">
                <h4>Contacto</h4>
                <p><i class="fas fa-envelope"></i> info@thisisfuerteventura.es</p>
                <p><i class="fas fa-phone"></i> +34 633 938 539</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 This is Fuerteventura. Todos los derechos reservados.</p>
        </div>
    </footer>

                <script src="js/proxy-discovery.js?v=2025110801" defer></script>
                <script src="js/main.js?v=2025110801" defer></script>
                <script>
                // Widget de tiempo general (Fuerteventura) - versión visual mejorada
                (function(){
                    const card = document.getElementById('island-weather-card');
                    if(!card) return;
                    const ICONS = { clear:'fas fa-sun', cloudy:'fas fa-cloud', rain:'fas fa-cloud-showers-heavy', wind:'fas fa-wind' };
                    function pickIcon(code){ if([0].includes(code)) return ICONS.clear; if([1,2,3].includes(code)) return ICONS.cloudy; if([51,53,55,61,63,65,80,81,82].includes(code)) return ICONS.rain; return ICONS.cloudy; }
                    function degToCard(deg){ const dirs=['N','NE','E','SE','S','SW','W','NW']; return (isFinite(deg)?dirs[Math.round(deg/45)%8]:'N/D'); }
                    function pickDesc(code){ if([0].includes(code)) return 'Despejado'; if([1,2,3].includes(code)) return 'Nubes'; if([51,53,55,61,63,65,80,81,82].includes(code)) return 'Lluvia'; return 'Variable'; }
                    async function load(){
                        card.innerHTML = '<div class="loading">Actualizando...</div>';
                        const lat = 28.500, lon = -13.862; // Puerto del Rosario aprox.
                        const params = new URLSearchParams({ latitude: lat, longitude: lon, current: 'temperature_2m,wind_speed_10m,wind_direction_10m,weather_code', daily: 'temperature_2m_max,temperature_2m_min,weather_code', timezone: 'auto' });
                        try{
                            const r = await fetch('https://api.open-meteo.com/v1/forecast?'+params.toString());
                            if(!r.ok) throw new Error('Respuesta no válida');
                            const j = await r.json();
                            const cur = j.current || {};
                            const icon = pickIcon(cur.weather_code);
                            const desc = pickDesc(cur.weather_code);
                            const timeTxt = new Date(cur.time||Date.now()).toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'});
                            const dirTxt = `${degToCard(cur.wind_direction_10m)} ${isFinite(cur.wind_direction_10m)?cur.wind_direction_10m+'°':''}`;
                            // Preparar mini pronóstico (3 días)
                            const daily = j.daily || {};
                            let forecastHtml = '';
                            if (daily.time && daily.temperature_2m_max && daily.temperature_2m_min && daily.weather_code) {
                                const days = daily.time.slice(0,3).map((d,i)=>({
                                    date: d,
                                    tmax: daily.temperature_2m_max[i],
                                    tmin: daily.temperature_2m_min[i],
                                    code: daily.weather_code[i]
                                }));
                                forecastHtml = '<div class="mini-forecast">' + days.map(day => {
                                    const dObj = new Date(day.date);
                                    const wd = dObj.toLocaleDateString('es-ES',{weekday:'short'});
                                    const ic = pickIcon(day.code);
                                    return `<div class="fc-day"><span class="fc-wd">${wd}</span><span class="fc-ic"><i class="${ic}"></i></span><span class="fc-t">${Math.round(day.tmax)}° / ${Math.round(day.tmin)}°</span></div>`;
                                }).join('') + '</div>';
                            }
                            card.innerHTML =
                                '<div class="temp-row">'
                                +   '<div class="temp-main">'
                                +     `<span class="icon-circle"><i class="${icon}"></i></span>`
                                +     `<span class="temp-value">${cur.temperature_2m ?? 'N/D'}°C</span>`
                                +   '</div>'
                                +   '<div class="temp-meta">'
                                +     `<span class="metric-badge"><i class="${ICONS.wind}"></i> ${cur.wind_speed_10m ?? 'N/D'} km/h · ${dirTxt}</span>`
                                +     `<span class="metric-badge"><i class="fas fa-cloud"></i> ${desc}</span>`
                                +     `<span class="metric-badge"><i class="fas fa-clock"></i> ${timeTxt}</span>`
                                +   '</div>'
                                + '</div>'
                                + forecastHtml;
                        }catch(e){ card.innerHTML = '<div class="error">Error al cargar el tiempo</div>'; }
                    }
                    load();
                })();
                </script>
        <script>
        (function() {
            const select = document.getElementById('beach-select');
            const weatherCard = document.getElementById('weather-card');
            const marineCard = document.getElementById('marine-card');
            const toggleWrap = document.querySelector('.horizon-toggle');
            if (!select || !weatherCard || !marineCard) return;

            const ICONS = { clear:'fas fa-sun', cloudy:'fas fa-cloud', rain:'fas fa-cloud-showers-heavy', wind:'fas fa-wind', waves:'fas fa-water' };
            function pickIcon(code){
                if ([0].includes(code)) return ICONS.clear;
                if ([1,2,3].includes(code)) return ICONS.cloudy;
                if ([51,53,55,61,63,65,80,81,82].includes(code)) return ICONS.rain;
                return ICONS.cloudy;
            }

            let horizonHours = 6;
            let currentLat = null, currentLon = null;

            async function load(lat, lon){
                currentLat = lat; currentLon = lon;
                weatherCard.innerHTML = '<div class="loading">Actualizando...</div>';
                marineCard.innerHTML = '<div class="loading">Actualizando...</div>';
                try {
                    // 1) Tiempo actual (endpoint estándar)
                    const weatherParams = new URLSearchParams({
                        latitude: lat,
                        longitude: lon,
                        current: 'temperature_2m,wind_speed_10m,weather_code',
                        timezone: 'auto'
                    });
                    const wRes = await fetch('https://api.open-meteo.com/v1/forecast?' + weatherParams.toString());
                    if(!wRes.ok) throw new Error('Respuesta no válida (tiempo)');
                    const wJson = await wRes.json();
                    const cur = wJson.current || {};
                    const icon = pickIcon(cur.weather_code);
                    const beachName = (select.options[select.selectedIndex]||{}).text || 'Playa seleccionada';
                    const timeTxt = new Date(cur.time || Date.now()).toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'});
                    weatherCard.innerHTML =
                        `<div class="card-title">${beachName}</div>`+
                        '<div class="temp-row">'
                        +   '<div class="temp-main">'
                        +     `<span class="icon-circle"><i class="${icon}"></i></span>`
                        +     `<span class="temp-value">${cur.temperature_2m ?? 'N/D'}°C</span>`
                        +   '</div>'
                        +   '<div class="temp-meta">'
                        +     `<span class="metric-badge"><i class="${ICONS.wind}"></i> ${cur.wind_speed_10m ?? 'N/D'} km/h</span>`
                        +     `<span class="metric-badge"><i class="fas fa-clock"></i> ${timeTxt}</span>`
                        +   '</div>'
                        + '</div>';

                    // 2) Oleaje: endpoint marino específico
                    const marineParams = new URLSearchParams({
                        latitude: lat,
                        longitude: lon,
                        hourly: 'wave_height',
                        timezone: 'auto'
                    });
                    const mRes = await fetch('https://marine-api.open-meteo.com/v1/marine?' + marineParams.toString());
                    if(!mRes.ok) throw new Error('Respuesta no válida (mar)');
                    const mJson = await mRes.json();
                    const hourly = mJson.hourly || {};
                    const waves = (hourly.wave_height && hourly.time) ? hourly.wave_height.map((h,i)=>({ h, t: hourly.time[i] })) : [];
                    // Encontrar el índice de la hora actual (aproximada) y recortar horizonte
                    const now = new Date();
                    const nowHourIso = now.toISOString().slice(0,13); // AAAA-MM-DDTHH
                    let start = 0;
                    if (hourly.time && Array.isArray(hourly.time)) {
                        const idx = hourly.time.findIndex((t)=> t.slice(0,13) === nowHourIso);
                        start = idx >= 0 ? idx : 0;
                    }
                    const count = Math.max(1, Math.min(horizonHours, waves.length - start));
                    const next = waves.slice(start, start + count);

                    marineCard.innerHTML =
                        `<div class="card-title">${beachName}</div>`+
                        `<div class="waves-block"><p><i class="${ICONS.waves}"></i> Próximas ${count}h (altura de ola)</p>`
                        + `<ul class="wave-list">${ next.map(w => (
                            `<li class="wave-chip"><i class="${ICONS.waves}"></i> <strong>${(w.h ?? 'N/D')} m</strong> <span>${new Date(w.t).toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'})}</span></li>`
                        )).join('') || '<li>Sin datos</li>'}</ul></div>`;

                    // Mareas deshabilitadas temporalmente (requiere API externa)
                    // Se puede integrar con worldtides.info o puertos del Estado en el futuro
                } catch(e) {
                    weatherCard.innerHTML = '<div class="error">Error tiempo</div>';
                    marineCard.innerHTML = '<div class="error">Error mar</div>';
                }
            }

            const [ilat, ilon] = (select.value || '28.7319,-13.8697').split(',');
            load(ilat, ilon);
            select.addEventListener('change', () => {
                const [lat, lon] = select.value.split(',');
                load(lat, lon);
            });
            if (toggleWrap) {
                toggleWrap.addEventListener('click', (e)=>{
                    const btn = e.target.closest('.toggle');
                    if(!btn) return;
                    const h = parseInt(btn.dataset.h, 10);
                    if(!isFinite(h)) return;
                    horizonHours = h;
                    toggleWrap.querySelectorAll('.toggle').forEach(b=> b.classList.toggle('active', b===btn));
                    if (currentLat && currentLon) load(currentLat, currentLon);
                });
            }
        })();
        </script>
</body>
</html>
